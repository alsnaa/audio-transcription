generator client {
  provider = "prisma-client"
  output   = "../generated/prisma"
}

datasource db {
  provider = "postgresql"
}

model File {
  id                String    @id @default(uuid())
  fileName          String
  filePath          String
  mimeType          String?
  processedFilePath String?
  chunkPaths        String[]  @default([])
  language          String?
  duration          Float?
  createdAt         DateTime  @default(now())
  job               Job?
  segments          Segment[]
}

model Job {
  id              String    @id @default(uuid())
  fileId          String    @unique
  file            File      @relation(fields: [fileId], references: [id])
  status          JobStatus @default(PENDING)
  totalChunks     Int       @default(0)
  completedChunks Int       @default(0)
  createdAt       DateTime  @default(now())
  updatedAt       DateTime  @updatedAt
}

model Segment {
  id        String   @id @default(uuid())
  fileId    String
  file      File     @relation(fields: [fileId], references: [id])
  start     Float
  end       Float
  text      String
  createdAt DateTime @default(now())
}

enum JobStatus {
  PENDING
  PROCESSING
  COMPLETED
  FAILED
}
